function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(e,r){if(e){if("string"==typeof e)return t(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var r=document.querySelectorAll(".message"),n=document.querySelector(".message-lose"),o=document.querySelector(".message-win"),a=document.querySelector(".button"),i=document.querySelectorAll(".field-cell"),l=document.querySelector(".game-field"),s=document.querySelector(".game-score"),c=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];function f(){for(var t=0;t<c.length;t++)for(var e=l.rows[t],r=0;r<c[t].length;r++){var n=e.cells[r];n.className="field-cell",n.textContent="",0!==c[t][r]&&(n.classList.add("field-cell--".concat(c[t][r])),n.textContent=c[t][r])}}function u(){for(var t,e=Math.floor(4*Math.random()),r=Math.floor(4*Math.random());0!==c[e][r];)e=Math.floor(4*Math.random()),r=Math.floor(4*Math.random());c[e][r]=(t=2,0===Math.floor(10*Math.random())&&(t=4),t)}function d(t){return t.filter(function(t){return 0!==t})}function h(t){for(var e=d(t),r=0;r<e.length-1;r++)e[r]===e[r+1]&&(e[r]*=2,e[r+1]=0,s.textContent=+s.textContent+ +e[r]);for(e=d(e);e.length<c.length;)e.push(0);return e}a.addEventListener("click",function(){a.classList.contains("restart")||(a.classList.remove("start"),a.classList.add("restart"),a.textContent="Restart");for(var t=0;t<c.length;t++)for(var n=0;n<c[t].length;n++)c[t][n]=0;e(r).map(function(t){return t.classList.add("hidden")}),s.textContent=0,e(i).map(function(t){t.className="field-cell",t.textContent=""}),u(),f(),a.blur()}),document.addEventListener("keyup",function(t){if(a.classList.contains("restart")&&n.classList.contains("hidden")&&o.classList.contains("hidden")){var r=JSON.parse(JSON.stringify(c));switch(t.code){case"ArrowLeft":(function(){for(var t=0;t<c.length;t++){var e=c[t];e=h(e),c[t]=e}})();break;case"ArrowRight":(function(){for(var t=0;t<c.length;t++){var e=c[t];e.reverse(),(e=h(e)).reverse(),c[t]=e}})();break;case"ArrowUp":(function(){for(var t=0;t<c.length;t++){var e=[c[0][t],c[1][t],c[2][t],c[3][t]];e=h(e),c[0][t]=e[0],c[1][t]=e[1],c[2][t]=e[2],c[3][t]=e[3]}})();break;case"ArrowDown":(function(){for(var t=0;t<c.length;t++){var e=[c[0][t],c[1][t],c[2][t],c[3][t]];e.reverse(),(e=h(e)).reverse(),c[0][t]=e[0],c[1][t]=e[1],c[2][t]=e[2],c[3][t]=e[3]}})();break;default:return}if(JSON.stringify(r)!==JSON.stringify(c)){u(),f(),e(i).some(function(t){return t.classList.contains("field-cell--2048")})&&o.classList.remove("hidden");for(var l=!0,s=!0,d=0;d<c.length;d++)for(var v=0;v<c.length-1;v++)if(c[d][v]===c[d][v+1]){l=!1;return}for(var m=0;m<c.length;m++)for(var g=[c[0][m],c[1][m],c[2][m],c[3][m]],y=0;y<g.length-1;y++)if(g[y]===g[y+1]){s=!1;return}c.every(function(t){return t.every(function(t){return 0!==t})})&&!0===s&&!0===l&&n.classList.remove("hidden")}}});
//# sourceMappingURL=index.ea0b583d.js.map
